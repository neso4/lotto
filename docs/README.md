# 프리코스 3주차 - 로또

## 🍀 개요

- 우테코 프리코스 3주차 과제인 로또를 구현한다.
- 미션 세부 내용은 [우테코 프리코스 저장소](https://github.com/woowacourse-precourse/java-lotto-6)에서 확인 가능하다.

## 🤖 로직 분석

1. 구매할 로또 장수만큼 금액을 입력받는다.
    - 1,000원 단위로 입력받고, 1,000원으로 나누어 떨어지지 않는 경우 `IllegalArgumentException`을 발생시킨다.
    - 숫자로 이루어지지 않는 다른 문자열이 입력된 경우 `IllegalArgumentException`을 발생시킨다.
2. 구매한 장수만큼 로또를 발행하고, 발행된 로또를 출력한다.
    - 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
3. 당첨 번호를 입력받는다. 번호는 쉼표를 기준으로 구분한다.
    - 공백이 포함되거나 숫자가 아닌 문자가 들어갈 경우 `IllegalArgumentException`을 발생시킨다.
    - 중복된 숫자가 입력된 경우 `IllegalArgumentException`을 발생시킨다.
4. 보너스 번호를 입력받는다.
    - 보너스 번호는 당첨 번호와 중복되어선 안 된다.
        - 중복된 번호가 입력된 경우 `IllegalArgumentException`을 발생시킨다.
5. 당첨 번호와 발행한 로또 번호를 비교하여 당첨 여부를 계산한다.
    - 1등: 6개 번호 일치 / 2,000,000,000원
    - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
    - 3등: 5개 번호 일치 / 1,500,000원
    - 4등: 4개 번호 일치 / 50,000원
    - 5등: 3개 번호 일치 / 5,000원
6. 당첨 통계와 함께 수익률을 계산한다.
    - 수익률은 소수 둘째 자리에서 반올림한다.

## 🚫 제한사항

### Lotto 클래스

- 제공된 `Lotto`클래스를 활용해 구현하여야 한다.
- `numbers`의 접근 제어자인 private을 변경할 수 없다.
- `Lotto`에 필드(인스턴스 변수)를 추가할 수 없다.
- `Lotto`의 패키지 변경은 가능하다.

## 🤔 고려사항

### Lotto 클래스

#### Lotto를 정렬해서 출력하기 위해서는?

> `List.of()`로 들어온 `List`를 어떻게 정렬해야 하는가?

- 주어진 `LottoTest`나 `ApplicationTest`에서는 `Lotto` 클래스에 들어갈 리스트를 `List.of()`메서드를 통해 제공한다.
- 그러나 `List.of()` 메서드는 **불변 리스트**로, 한번 들어온 값은 수정될 수 없다.
- 그러므로 출력 시점에 가변 리스트인 `ArrayList`를 따로 선언하여 값을 옮기고 이를 정렬하여 출력하거나, 생성자에서 이를 진행해야 한다.
- 출력 시점에 `ArrayList`를 선언해 복사하는 방식은 여러 번 출력할 경우가 있다면 메모리적으로 비효율적일 것으로 예상된다.
- 생성 시점에 `ArrayList`로 값을 받는 방식은 메모리적으로 효율적이나, `ArrayList`가 **가변 리스트**이므로 변경될 우려가 있다.

##### 결론

- 생성 시점에 `ArrayList`로 값을 옮겨 오는 방식은 값이 변경될 우려가 있지만, private 선언으로 직접적인 접근을 막아두었다.
- 제공하는 getter나 setter도 없으므로, 리스트의 값 변경에 대한 우려는 하지 않아도 된다고 판단했다.
- 따라서, 생성 시점에서 `ArrayList`로 값을 복사하여 이를 미리 정렬하는 방식으로 사용하기로 결정하였다.

## 📝 구현 기능 목록

- [X] 상수들을 관리하기 위한 Enum Class 생성
    - [X] 콘솔에 출력할 메세지를 관리할 클래스 - `ConsoleMessage`
        - [X] 메세지를 출력할 수 있다. - `ConsoleMessage#print()`
    - [X] 게임 진행과 관련된 상수들을 관리할 클래스 - `Game`
    - [X] 사용자가 입력한 값들의 유효성을 검증하기 위해 사용할 정규식을 관리할 클래스 - `RegexValidator`
        - [X] 유효하지 않은 입력일 때 예외를 발생시킬 수 있다. - `RegexValidator#validate()`
    - [X] 예외를 발생시킬 때 보여줄 메세지를 관리할 클래스 - `ExceptionMessage`
    - [X] 로또 당첨 숫자 개수에 따라 등수를 관리할 클래스 - `WinnerType`
- [X] 1~45 사이의 무작위 수 6개를 생성하는 유틸 클래스 생성 - `LottoNumberGenerator`
- [X] 쉼표로 구분된 문자열을 리스트로 치환해줄 유틸 클래스 생성 - `ListConverter`
- [X] 중복되지 않는 6개 숫자를 가지는 로또 클래스 생성 - `Lotto`
    - [X] 발행된 로또 번호를 출력할 수 있다. - `Lotto#toString()`
    - [X] 주어진 번호를 포함하는지의 여부 알 수 있다. - `Lotto#contains()`
    - [X] 다른 로또와 일치하는 번호의 수를 알 수 있다. - `Lotto#matching()`
- [X] 당첨 번호를 관리할 클래스 생성 - `WinningNumber`
    - [X] 입력으로 주어진 무작위의 로또 번호에 대해 적절한 등수를 반환할 수 있다. - `WinningNumber#calcWinner()`
- [X] 발행한 로또들을 관리할 클래스 생성 - `LottoStore`
    - [X] 주어진 금액만큼 로또를 발행할 수 있다. - `LottoStore#buy()`
    - [X] 발행된 로또들의 번호들을 차례로 출력할 수 있다. - `LottoStore#printLottos()`
- [X] 당첨 번호와 발행 로또를 바탕으로 당첨자를 분류할 클래스 생성 - `LottoGame`
    - [X] 입력된 당첨 번호와 보너스 번호를 바탕으로 당첨자를 계산할 수 있다. - `LottoGame#guessWinner()`
    - [X] 당첨 통계를 출력할 수 있다. - `LottoGame#printResult()`
- [X] 게임의 흐름을 관리할 클래스 생성 - `LottoGameController`
    - [X] 사용자로부터 로또 구입 금액을 입력받을 수 있다.
        - [X] 입력받은 금액으로 로또들을 발행한다.
    - [X] 사용자로부터 당첨 번호를 입력받을 수 있다.
    - [X] 사용자로부터 당첨 보너스 번호를 입력받을 수 있다.
    - [X] 추첨이 끝난 후 당첨 통계와 수익률을 출력할 수 있다.

## ✅ 구현 테스트 목록

- [X] 콘솔 메세지들을 주어진 인자에 맞게 올바르게 출력하는가? - `ConsoleMessageTest`
- [X] 예외 메세지들의 앞에 [ERROR] 라는 머릿말이 정상적으로 출력되는가? - `ExceptionMessageTest`
- [X] 정상/비정상적인 입력에 대해 정규식이 올바르게 예외를 발생시키는가? - `RegexValidatorTest`
- [X] 당첨자에 관련된 메서드가 올바르게 작동하는가? - `WinnerTypeTest`
    - [X] 일치하는 숫자에 따른 당첨자 타입을 올바르게 가져오는가?
    - [X] 각 당첨자 타입에 맞게 올바른 정보를 출력하는가?
- [X] 주어진 로또 번호를 올바르게 검증하고 출력할 수 있는가? - `LottoTest`
- [X] 당첨 번호가 주어졌을 때 주어지는 다른 로또 번호들에 대해 적절한 당첨 등수를 리턴하는가? - `WinningNumberTest`
