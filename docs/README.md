# 미션 - 로또

---

## 도메인 명세
---

- [x] Lotto : 제공된 `Lotto` 클래스로 구현
    - `numbers`의 접근 제어자인 private을 변경 X
        - [x] 1 ~ 45 사이의 숫자가 아니라면 예외 발생
        - [x] numbers의 length가 6이 아니라면 예외 발생
        - [x] 중복된 숫자가 있으면 예외가 발생한다.
    - `Lotto`에 필드(인스턴스 변수)를 추가할 수 없다.
    - `Lotto`의 패키지 변경은 가능


- [x] BuyLotto : 구입한 로또들을 모아두는 일급 컬렉션
    - [x] `List<Lotto>`를 필드로 가진다.
    - [x] `Lotto`가 비어있다면 예외를 발생시킨다.
        - [x] List<Lotto>를 반환활때 unmodified 만든다.


- [x] WinningLotto : 당첨 번호를 가진다.
    - [x] `Lotto`를 생성자 주입 받는다.
    - [x] 보너스 번호를 가진다.
        - [x] 로또 번호 중 하나와 중복되면 예외가 발생
        - [x] 1 ~ 45 사이의 숫자가 아니라면 예외가 발생
    - [x] 매개변수로 받은 Lotto를 통해 Lotto 등급을 반환한다.
        - [x] 매개변수로 받은 Lotto와 일치하는 개수를 파악
        - [x] 매개변수로 받은 Lotto와 보너스 번호가 일치 파악


- [x] LottoRankInfo : 로또 일치 개수에 따른 보상 금액을 정의한 enum
    - [x] `(int,Boolean,long)` 쌍으로 받도록 한다.
        - [x] 보너스 일치가 상관없으면 null로 받음
    - [x] 로또 일치 개수와, 보너스번호 일치 유무를 알면 LottoRankInfo를 얻을 수 있도록 한다.
        - [x] 일치하지 않는 경우에는 당첨되지 않음을 뜻하는 enum을 반환
    - [x] FIRST,SECOND,THIRD,FOURTH,FIFTH,NONE 6개로 구성


- [x] LottoCreateModel : 로또 번호를 생성하는 방식에 관한 인터페이스
    - [x] generate()를 가진다.
        - [x] 반환은 Lotto로 한다.


- [x] AutoLottoCreateModel : 로또 번호 자동 생성 방식 (LottoCreateModel 구현체)
    - [x] 1 ~ 45 사이의 숫자를 6개 생성한다.
        - `Randoms.pickUniqueNumbersInRange(1, 45, 6);`사용

- [x] LottoMachine : 로또를 판매하는 기계
    - [x] LottoCreateModel을 필드로 가진다.
    - [x] makeLotto(int totalPrice) : 총 가격만큼 로또 생성
        - [x] 로또를 개수만큼 생성한다.
        - [x] 구입 금액이 1000 단위로 나누어떨어지지 않으면 예외 발생
        - [x] BuyLotto을 반환하도록 한다.

- [x] LottoResult : 로또 당첨 결과를 가지는 클래스
    - [x] 총 당첨금액을 계산하는 함수를 가진다.
    - [x] LottoRankInfo가 각각 몇개씩 나오는지를 알도록 한다.
    - [x] 수익률을 계산한다.
        - [x] 수익률은 소숫점 두번째 자리에서 반올림한다.
        - [x] 끝에 %를 붙인다.

---

## 서비스

- [x] LottoPurchaseService : 로또 구입과 관련된 서비스
    - [x] LottoMachine을 생성자 주입 받는다.
    - [x] 구입 금액을 생성자로 가져야 한다.
    - [x] 구입 금액만큼 로또를 생성한다.
    - [x] BuyLottoDTO.Output을 반환하는 메서드를 가져야한다.


- [x] LottoResultService : 로또 당첨 결과를 생성하는 서비스
    - [x] WinningNumber를 가진다.
    - [x] BuyLotto를 가진다.
    - [x] LottoResultDto를 생성하는 메서드를 가진다.

## DTO

- [x] DTO: DTO 자체를 의미하는 추상클래스
    - [x] 내부 클래스로 Input을 가진다.
        - [x] Input은 DTO를 상속
        - [x] 입력 뷰에서 필요한 정보들은 모두 DTO.Input을 상속
    - [x] 내부 클래스로 Output을 가진다.
        - [x] Output은 DTO를 상속
        - [x] 출력 뷰에서 필요한 정보들은 모두 DTO.Output을 상속
    - DTO 클래스를 만든 이유: DTO 클래스를 인식하기 위해

- [x] BuyLottoDTO : BuyLotto 대해 필요한 정보
    - [x] Input : 입력에 필요한 BuyLotto 정보
        - [x] 총 구입 금액
    - [x] Output : 출력에 필요한 BuyLotto 정보
        - [x] 각 로또들이 생성한 6자리 숫자(오름차순)


- [x] WinningLottoDTO : WinningLotto에 대한 필요한 정보
    - 출력은 따로 존재하지 않으니 Input/Output 분리는 하지 않는다.
    - [x] 당첨번호 6자리를 받는다.
    - [x] 보너스 번호를 받는다.


- [x] ResultDTO : 결과에 대한 DTO
    - 입력은 따로 존재하지 않으니 Input/Output 분리는 하지 않는다.
    - [x] 총 수익률
    - [x] 로또 매칭 개수
    - [x] 로또 당첨 매칭 정보

### 입력 명세

- [x] InputValidator : 입력 검증에 대한 로직을 가지는 클래스
    - [x] 숫자인지에 대해 검사하는 함수를 가진다.
    - [x] 해당 입력이 빈 값인 지 검사하는 함수를 가진다.
- [x] InputView : 인터페이스
    - [x] read(Map<String,String> parameter)를 함수로 한다.


- [x] LottoBuyInputView : 로또 구매에 대한 입력
    - [x] 총 구입 금액을 입력받는다.
        - [x] 0 미만의 숫자가 오면 예외를 발생시킨다.
        - [x] 입력 앞뒤의 공백은 없애준다.
        - [x] 숫자 사이에 오는 공백 또한 에러로 처리하지 않고 없애준다.
            - 이는 금액의 단위가 클 때, 사용자가 "1000 000 000" 이런식으로 입력해도 에러가 나지 않게 하는 편의 사항으로 생각해서 넣음


- [x] WinningLottoInputView : 당첨 로또에 대한 입력
    - [x] 6개의 숫자를 입력받는다.
        - [x] 구분자는 `,`로 한다.
        - [x] `,`와 숫자 이외의 입력이 들어오면 예외가 발생한다.
        - [x] 공백이 들어오면 그 공백을 없애준다.
    - [x] 보너스 숫자를 입력받는다.
        - [x] 숫자 이외의 다른 입력이 들어오면 예외를 발생시킨다.

### 출력 명세

- [x] OutputView : 인터페이스
    - [x] Model(Map<String,Object>)를 가지고, view를 구현한다.
- [x] LottoBuyOutputView : 로또 구매에 대한 출력
    - [x] `구입금액을 입력해 주세요.`를 출력한다.
    - [x] 총 구입한 로또에 대해 출력한다.
        - [x] 구입한 개수를 출력한다.
            - [x] `8개를 구매했습니다.`
            - [x] 생성한 번호를 `[1, 3, 5, 14, 22, 45]` 해당 형식으로 출력
                - [x] 오름차순으로 생성하게끔 한다.


- [x] WinningLottoOutputView : 당첨 로또 번호 지정에 대한 출력
    - [x] `당첨 번호를 입력해 주세요.` 를 출력한다.
    - [x] `보너스 번호를 입력해 주세요.` 를 출력한다.

- [x] LottoResultOutputView : 로또 당첨 결과에 대한 출력
    - [x] 당첨 정보와 통계에 대해 출력한다.
        - ```
      3개 일치 (5,000원) - 1개
      4개 일치 (50,000원) - 0개
      5개 일치 (1,500,000원) - 0개
      5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
      6개 일치 (2,000,000,000원) - 0개
        ```
        - [x] 총 수익률에 대해 출력한다.
            - [x] `총 수익률은 62.5%입니다.`

## 기타

- [x] ERROR : 모든 에러 텍스트들을 모아두는 클래스
    - [x] 접두사 : `[ERROR] `를 가진다.
    - [x] 접미사 : `\n`를 가진다.
    - [x] 함수를 통해 메시지 앞뒤에 접두사와 접미사가 붙도록 한다.

- [x] ParameterConfig : View 파라미터 이름에 대해 상수값을 모두 모아둔 곳

#### 실행 결과 예시

```
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```