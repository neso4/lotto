# 기능 구현 목록 - 로또

## 📘 프로그램 설명

### 개요

- 입력한 금액만큼 로또를 자동 구매해, 랜덤으로 발행된 로또 번호들을 확인하고
- 입력한 당첨번호와 발행된 로또 번호들을 비교해 수익률을 계산해보는 로또 시뮬레이션 프로그램이다.
- 시뮬레이션이기에 실제 상황과 최대한 유사하게 만들기 위한 장치들이 곳곳에 있다. (ex. 로또 소유자만 당첨금 수령 가능, 당첨 결과 분석 어플, 로또 발행기 등). 이는 아래 부록의 이야기를 읽어보면 자세히
  나와있다.

### 용어 정의

- 발행 : 숫자를 입력받거나 랜덤으로 숫자를 뽑아, 6개의 숫자로 이루어진 로또를 만드는 것을 말한다.
- 당첨 :  당첨 번호와 로또 번호를 비교했을 때 일치하는 숫자가 3개 이상일 시 당첨됐다고 말한다.
- 판매 : 판매자가 구매 요청을 받으면 로또를 발행해 구매자에게 전달해준다.
- 구매(구입) : 구매자가 로또를 구매하면, 로또가 발행되고 이를 소유할 수 있다.
    - 발행된 로또를 구매자가 소유하고 있어야 당첨금을 수령할 수 있다. 즉, 소유자 없이 발행만 된 로또는 무효다.

## 🗂️ Model

### LottoSeller (로또 판매자)

- [x]  `로또를` 금액에 맞게 발행해 `판매`한다
    - [x]  구입 금액이 1000원으로 나누어 떨어지지 않는 경우, 예외를 발생시킨다.
    - [x]  구입 금액이 양수가 아닌 경우, 예외를 발생시킨다.

### LottoBuyer (로또 구매자)

- [x]  `로또를` 원하는 금액만큼 `구매`한다.
- [x]  `소유한 로또를 제공`한다.
- [x]  `발행된 로또를` 로또 당첨 결과 분석기에 `입력`해 당첨 통계를 얻는다.

### LottoGenerator (로또 발행기)

- [x]  `로또를 개수만큼 생성`한다.

### Lotto (로또) → **First Class Collection**

- [x]  `로또 번호들을 모아 검증 후 저장`한다.
    - [x] 로또 번호가 6개가 아닌 경우, 예외를 발생시킨다.
    - [x] 로또 번호가 중복될 경우, 예외를 발생시킨다.
    - [x] 로또 번호가 1~45 사이가 아닌 경우, 예외를 발생시킨다.
- [x]  `로또 번호들을 모아 제공`한다.

### Lottos (로또 모음) → **First Class Collection**

- [x]  `로또들을 모아 저장`한다.
- [x]  `로또들을 모아 제공`한다.
- [x]  `로또들의 구매 금액을 제공`한다.

### LottoWinningAnalyzer (로또 당첨 결과 분석기)

- [x]  `비교할 로또들과 당첨 번호를 저장` 한다.
- [x]  `당첨 통계를 생성`한다.
    - [x]  등수 별 `당첨 개수를 계산`한다.
    - [x]  `총 수익률을 계산`한다

### WinningNumbers (당첨 번호) → **First Class Collection**

- [x]  `당첨 번호들(로또)과 보너스 번호를 모아 검증 후 저장`한다.
    - [x]  보너스 번호가 1~45 사이가 아닌 경우, 예외를 발생시킨다.
    - [x]  당첨 번호들과 보너스 번호가 중복될 경우, 예외를 발생시킨다.
- [x]  `당첨 번호와 보너스 번호들을 모아 제공`한다.

### WinningRule (당첨 규칙) → Enum

- [x]  1등~5등 별 `당첨 금액과 당첨 조건을 제공`한다.

## 👩🏻‍💻 View

### InputView

- [x]  `구입금액을 입력` 받는다. (`String` → `int`)
    - [x]  정수가 아닐 경우, 예외를 발생시킨다.
- [x]  `당첨 번호를` 쉼표로 구분해 `입력` 받는다. (`String` → `List<Integer>`)
    - [x]  각 원소가 정수가 아닐 경우, 예외를 발생시킨다.
- [x]  `보너스 번호를 입력` 받는다. (`String` → `int`)
    - [x]  정수가 아닐 경우, 예외를 발생시킨다.

### OutputView

- [x] `구입금액 입력 안내문구를 출력`한다.
- [x] `당첨 번호 입력 안내문구를 출력`한다.
- [x] `보너스 번호 입력 안내문구를 출력`한다.
- [x] `구매된 로또 정보`을 출력한다.
    - [x]  구매된 `로또 개수를 출력`한다.
    - [x]  구매된 `로또 번호들을 오름차순 정렬해 출력`한다.
- [x] `당첨 통계`를 출력한다.
    - [x]  등수 별 `당첨 개수를 출력`한다.
    - [x]  `총 수익률을 출력`한다

## 📡 Controller

### LottoGameController

- [x]  로또 (시뮬레이션) 게임을 시작한다.
    - [x]  `자동 로또를 구매`한다.
    - [x]  `로또 당첨 번호를 결정`한다.
    - [x]  `로또 당첨 통계를 계산`한다.

## 🔑 Exception

### ErrorCode → Enum

- [x]  `예외 메시지를 제공`한다.

### LottoGameException

- [x]  예외 메시지를 담아 `예외를 커스텀`한다.

# 부록

## 🚀 A. 지난 코드리뷰에서 배운 것 적용하기

아래 원리들과 관련해 세부적인 내용은 별도 포스트에 상세히 정리해두었습니다.

링크 : [지식 동기화 동참하기 (코드리뷰를 통해 얻은 것)](https://choo.oopy.io/da763bd5-3a1b-44bb-9d26-e5ac9b3088af)

- 일급 컬렉션은 본인이 감싸고 있는 콜렉션을 반환해도 된다. 단, 원본이 변경되지 않게 주의한다.
- 뷰에서 처리할 예외와 모델에서 처리할 예외를 구분할 기준을 정해야 한다.
- 테스트가 어려울 때 코드를 바꾸는 기준을 정해야 한다.
- 모델을 DTO로 매핑하는 작업은 DTO에서 하는 게 낫다
- YAGNI에 입각해 오버킬 유무를 결정하면 좋다 (with 전략패턴)
- Application은 객체가 아니기에 역할을 부여하면 안된다
- 절차지향을 무조건 지양할 필욘 없다

## 🚀 B. 스토리텔링식으로 설계해 협력/책임/역할 정하기

지난 주차에 공유한 내용에 이어 이번 주차에도 스토리텔링식 설계를 적용해보았습니다. 지난 내용도 보고 싶으시다면 아래 별도 포스트로 들어가시면 됩니다.

링크 : [스토리텔링식으로 객체지향적인 설계 쉽게 따라해보기 (with [책] 객체 지향의 사실과 오해)](https://choo.oopy.io/5f9aa500-2950-4da0-8774-572e95fb30fd)

- 이야기 : 모자장수가 로또를 사고 당첨 결과를 얻음
    - 로또 판매를 시작하는 일요일, 로또 가게에 `로또 발행 기계`, `판매원`, `모자 장수`, `로또 당첨 계산 어플`이 있음
        - `판매원`이 모자 장수에게 “얼마어치 구매할 건가요?” 라고 물어봄
            - `모자 장수`가 판매원에게 “로또 8000원어치 구매요~”라고 말함
        - `판매원`이 “8장 구매”라고 로또 발행 기계에 입력함
            - `로또 발행 기계`가 판매원에게 로또 8장을 종이에 출력해줌
        - `판매원`이 “발행된 로또 가져가세요~ 갖고계셔야 당첨금 받으실 수 있어요~”라고 모자장수에게 말함
            - `모자 장수`가 발행된 로또 가져가서 소유함
    - 일주일이 지나 로또 판매를 마친 토요일, 로또 발표 현장에 `왕`, `로또 당첨 계산 어플`이 있음
        - `왕`이 “이번주 당첨 번호는 1,2,5,26,35,42+17 로 결정!”이라고 로또 당첨 계산 어플에 입력함
            - `로또 당첨 계산 어플`이 왕의 당첨 번호를 입력받음
    - 다음날 일요일, 모자 장수의 집에 `모자 장수`, `로또 당첨 계산 어플`이 있음
        - `모자 장수`가  `로또 당첨 계산 어플`에 본인의 로또 번호를 입력함
            - `로또 당첨 계산 어플`이 모자 장수의 로또 번호들을 저장함
        - `모자 장수`가 로또 당첨 계산 어플에서 “당첨 통계 계산” 버튼을 클릭함
            - `로또 당첨 계산 어플`이 당첨 통계를 출력함
- 협력 : 요청과 응답
    - 누군가가 `판매원`에게 판매를 시작하라고 요청함으로써 로또 판매가 시작됨 (in 로또 가게)
        - `판매원`이 모자 장수에게 구매 개수를 말할 것을 요청함
            - `모자 장수`가 구매 개수를 말함으로써 판매원의 요청에 응답함
        - `판매원`이 로또 발행 기계에게 개수만큼 로또를 발행할 것을 요청함
            - `로또 발행 기계`가 로또를 발행함으로써 판매원의 요청에 응답함
        - `판매원`이 모자 장수에게 발행된 로또를 가져가서 소유하라고 요청함
            - `모자 장수`가 발행된 로또 소유함으로써 판매원의 요청에 응답함
    - 누군가가 `왕`에게 로또 발표를 시작하라고 요청함으로써 로또 당첨 번호 결정이 시작됨 (in 로또 발표 현장)
        - `왕`이 로또 당첨 계산 어플에게 결정한 당첨 번호를 저장할 것을 요청함
            - `로또 당첨 계산 어플`이 당첨 번호를 저장함으로써 왕의 요청에 응답함
    - 누군가가 `모자 장수`에게 당첨 결과 확인해보라고 요청함으로써 로또 결과 확인이 시작됨 (in 모자 장수의 집)
        - `모자 장수`가  `로또 당첨 계산 어플`에게 본인의 로또 번호를 저장할 것을 요청함
            - `로또 당첨 계산 어플`이 모자 장수의 로또 번호들을 저장함으로써 모자 장수의 요청에 응답함
        - `모자 장수`가 로또 당첨 계산 어플에게 당첨 통계를 계산할 것을 요청함
            - `로또 당첨 계산 어플`이 당첨 통계를 계산해 출력함으로써 모자 장수의 요청에 응답함
- 책임 : 하는 것(요청, 계산)과 아는 것
    - `판매원`
        - 하는 것 : 모자 장수에게 구매할 로또 개수 말하도록 요청, 로또 발행 기계에게 로또 발행하도록 요청, 모자 장수에게 발행한 로또 가져가서 소유할 것을 요청
    - `로또 발행 기계`
        - 하는 것 : 로또 번호를 자동으로 뽑아 로또 발행(생성)
    - `모자 장수`
        - 하는 것 : 로또 당첨 계산 어플에게 로또 번호들 저장하도록 요청, 로또 당첨 계산 어플에게 당첨 통계 계산하도록 요청
        - 아는 것 : 구매할 로또 개수, 발행된 로또
    - `왕`
        - 하는 것 : 로또 당첨 계산 어플에게 당첨 번호 저장하도록 요청
        - 아는 것 : 당첨 번호
    - `로또 당첨 계산 어플`
        - 하는 것 : 모자 장수가 구매i한 로또들과 당첨 번호 비교해 당첨 통계를 계산
        - 아는 것 : 모자 장수의 로또, 당첨 번호, 당첨 규칙
- 역할 : 책임의 집합 (재사용성)
    - 판매원 → `로또 판매자` (`LottoSeller`)
    - 모자 장수 → `로또 구매자` (`LottoBuyer`)
    - 로또 발행 기계 → `로또 발행기` (`LottoGenerator`)
        - `로또` (`Lotto`)
    - 왕 + 로또 당첨 계산 어플 → `로또 당첨 결과 분석기` (`LottoWinningAnalyzer`)
        - `당첨 번호` (`WinningNumbers`)
        - `당첨 규칙` (`WinningRule`)

## 🚀 C. 다이어그램

![img.png](diagram.png)