
![lotto](https://github.com/ddoddii/ddoddii.github.io/assets/95014836/531a8957-d71c-42f9-9d13-b081bb881506)
![Static Badge](https://img.shields.io/badge/java-17-blue?color=green)
- Author : [엄소은](https://github.com/ddoddii)

## 📚목차
1. [🎰 로또 게임 가이드](#-로또-게임-가이드)
2. [👀 로또 실행 결과 예시](#-로또-실행-결과-예시)
3. [🎯 기능 구현 목록](#-기능-구현-목록)
4. [🌍 로또 세상 설계](#-로또-세상-설계)
4. [🧠 고민한 지점](#-고민한-지점)
---

## 🎰 로또 게임 가이드
- 사용자는 로또를 구매할 금액을 입력한다.
  - 로또는 한 장에 1000원이다.
- 사용자가 입력한 구매 금액만큼 중복되지 않는 6개의 숫자들로 이루어진 로또를 발행한다.
  - 로또 숫자는 1 이상 45 이하이다.
- 사용자는 당첨 번호 6개와, 보너스 번호 1개를 입력한다.
  - 당첨번호 6개와 보너스 번호는 중복되면 안된다.
  - 당첨번호 6개와 보너스 번호도 1이상 45 이하의 숫자이다.
- 당첨된 숫자 갯수 만큼 수익금을 더하고, 수익률을 계산해준다.


## 👀 로또 실행 결과 예시
![Convert to GIF project Nov 8](https://github.com/ddoddii/ddoddii.github.io/assets/95014836/dad8abed-e7d7-4c7c-b46b-c64b1dfcc5b8)


## 🎯 기능 구현 목록

### ✅ 입력
- [X] 사용자로부터 구입금액을 입력 받는 기능
  - [X] 구입금액은 null 이면 안된다.
  - [X] 구입금액은 정수여야 한다.
  - [X] 구입금액에 공백이 포함되면 안된다.
  - [X] 구입금액은 1000이상이어야 한다.
  - [X] 구입금액이 1000 의 배수이어야 한다.
  - [X] ERROR 발생 시 구입금액을 다시 입력 받는다.
  - [X] 로또 수량은 구입금액 / 로또금액 이다.
- [X] 사용자로부터 당첨번호 6개를 입력받는 기능
    - [X] 당첨번호는 쉼표(,) 기준으로 구분한다.
    - [X] 당첨번호 6개와 보너스 번호는 중복이 되면 안된다.
    - [X] 당첨번호와 보너스 번호 중 중복이 있을 시 ERROR를 출력한다.
    - [X] 당첨번호와 보너스 번호는 모두 1이상 45이하의 정수이다.
    - [X] 당첨번호와 보너스 번호가 1이상 45이하의 정수가 아니면 ERROR를 출력한다.
    - [X] ERROR 발생 시 오류가 난 부분에서 다시 입력 받는다.
- [X] 사용자로부터 보너스 번호 1개를 입력받는 기능
  - [X] 보너스 번호는 1이상 45 이하의 정수이다.
  - [X] 보너스 번호는 1개이다.


### ✅ 로또 
- [X] 로또 번호를 생성하는 기능
    - [X] 랜덤한 번호 생성은 `Randoms.pickUniqueNumbersInRange()` 를 사용한다.
    - [X] 로또는 6개의 숫자로 구성된다. 
    - [X] 로또 번호 6개는 중복이 되면 안된다.
    - [X] 로또 번호는 모두 1이상 45이하의 정수이다.
- [X] 사용자가 입력한 구입 금액을 1000으로 나눈 개수 만큼 로또를 생성하는 기능
  - [X] 생성한 로또의 개수를 출력한다. 
  - [X] 생성한 로또를 모두 출력한다.
- [X] 당첨 통계를 계산하는 기능
  - [X] 일치하는 번호의 갯수를 확인한다.
  - [X] 보너스 번호가 로또 내에 있는지 확인한다.
  - [X] 총 수익금은 당첨 금액은 당첨된 수익금을 모두 더한 값이다.
  - [X] 수익률은 (총 수익금)/(구매금액) * 100 으로 계산한다.
  - [X] 수익률은 소수점 둘째 자리에서 반올림한다.

### ⚠️ 예외 처리
- [X] IllegalException 을 상속한 Custom Exception 활용
- [X] 예외 발생 시 에러 메세지를 출력하고, 재입력을 받는다.
- [X] 입력 형식 관련 예외
  - [X] `NullInputException` : 입력값이 공백일 때 예외
  - [X] `HasSpaceException` : 입력값에 공백이 있을 때 예외
  - [X] `NotIntegerException` : 입력값이 숫자가 아닐 때 예외
- [X] 구매 금액 비즈니스 로직 관련 예외
  - [X] `BudgetDivisionException` : 구매 금액이 1000의 배수가 아닐 때 예외
  - [X] `BudgetRangeException` : 구매 금액이 1000보다 작을 때 예외
- [X] 로또 비즈니스 로직 관련 예외
  - [X] `LottoDuplicatException` : 로또 내 중복된 숫자들이 있거나 보너스 숫자와 로또 숫자들이 중복될 때 예외
  - [X] `LottoOutOfRangeException` : 로또 내 숫자들이 1이상 45가 아닐 때 예외
  - [X] `LottoSizeException` : 로또 내 숫자들이 6개가 아닐 때 예외


## 🌍 로또 세상 설계
### Model 

![image](https://github.com/ddoddii/ddoddii.github.io/assets/95014836/04498def-d9a7-4133-b6a1-5160e3de3fb6)

### Model-Controller-View
![image](https://github.com/ddoddii/ddoddii.github.io/assets/95014836/7022ce91-e043-486f-a10f-141387ac7a2b)

## 🧠 고민되는 지점
<details>
<summary>1. 검증 로직의 분리</summary>

- 이번 미션에서는, 검증을 두 단계로 나누었습니다. 
1. View 에 입력이 들어오면 Controller 에서 **입력값 형식 검증**을 진행했습니다. 
   - 입력값 형식에서는 공백 여부, 공백 포함 여부, 숫자 여부를 검증하였습니다. 
2. model 의 객체 내에서 **비즈니스 로직**에 대한 검증을 진행했습니다. 
  - 예를 들어, Lotto 에 대한 비즈니스 로직은 '1 이상 45 이하의 숫자 여야 한다' 이 있습니다. 
- 하지만 프로그램이 더욱 복잡해지면, 검증 로직이 여러 군데에 나누어져 있다는 것이 혼란을 가져올 것이라고도 생각합니다.

</details>

<details>
<summary>2. 테스트코드와 구현의 결합도가 높은 점</summary>

- 전체 게임의 흐름을 다루는 LottoGame 의 테스트 코드를 작성하면서, Game 에 필요한 모든 객체들을 생성해야 했습니다. 
- 예를 들어, 로또에서 당첨 랭킹에 해당하는 로또의 개수를 세는 메서드를 테스트하기 위해서는, 구매금액(Budget), 당첨로또(WinningLotto). 보너스 넘버(BonusNumber) 에 해당하는 객체들을 모두 생성했습니다.
- 이렇게 하면, 구현 코드가 조금이라도 바뀔 시 테스트가 쉽게 영향을 받는 다는 단점이 있다고 생각합니다. 


</details>
