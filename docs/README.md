# 미션 - 로또

## 목표
완벽한 패턴과 구조를 짜내기보다, 상황에 맞게 좋은 코드와 테스트를 작성하는 습관을 배우는게 코스의 목적이 아닐까 생각이 들었습니다. 이런 코드를 목표로 합니다.
- 더 잘 읽히는 코드, 의도를 나타내는 코드. 객체의 행위를 잘 추상화하기.
- 컨벤션을 잘 지키는 코드
- 기능 단위로 상대방이 리뷰하기 쉬운코드. 기능마다 개념 단위로 커밋하기보다 읽기 좋은 단위로 커밋하기.
- 함수형에 가깝게 반환 값을 주고받도록 구현한 코드

# 구현할 기능 목록

## 사용자에게 구입 금액을 입력받는 기능
- [x] 게임 전체 기능을 가진 LottoController 생성
- [x] 구입 금액을 입력받는 기능 구현
- 구입 금액 입력 요구 메시지 보여주는 기능
- 숫자를 입력받는 기능
  - 빈 값 입력 제한
  - 숫자 중간에 공백이나 문자가 들어가지 않는 숫자 형태값만 입력가능
  - 숫자 범위 Integer로 제한
- 에러 메시지와 입력 메시지 enum 타입으로 구현. 메서드 이름과 역할을 통일을 위해 Message 인터페이스 생성
- [x] 입력 값으로 구입 금액 객체 생성 및 검증하는 기능 구현
- 1장 가격 이하의 구입 금액은 입력 불가능 (음수 입력 불가능) 
- 1000원 단위로 나누어 떨어지는지 검증하는 기능
- [x] 구매 개수를 출력하는 기능 구현
- PurchaseQuantity 구매 개수 반환하는 기능
- OutputView 구매 개수를 출력
- [x] InputView, OutputView 책임 변경 및 메서드 수정
- view 패키지 클래스들에 출력하는 기능만 넣을 거라면, 기본 출력 메서드와 다를게 없다는 생각이 들어 책임을 변경했다.
  - InputView에서는 입력을 받고, 입력을 요구하는 책임을 가지도록 수정
  - InputView에 구매 금액 입력 기능 추가 
  - OutputView는 처리한 입력값을 변환하여 출력해주는 책임을 가지도록 수정
  - OutputView에 구매 수량과 객체를 출력하는 기능 추가
  - InputUtils는 기본적인 타입을 체크하고 입력받는 책임
- toString()은 객체 자체의 정보를 나타낼때만 사용하기
- PurchaseBudget 메서드로 PurchaseQuantity 생성해 반환도록 수정
## 로또 번호를 발행하고 출력하는 기능
- [x] 6자리 로또 번호를 발행하는 기능 구현
- 숫자 범위 검증
- [x] 발행한 로또 번호를 출력하는 기능 구현
- Lotto 생성자 추가, 유효성 검사 추가
- Lotto 번호 출력 기능 구현
- 로또 번호 오름차순 정렬
- [x] Lotto의 numbers의 타입 변경
- 타입 List<LottoNumber>로 변경
- 요구사항에 해당 클래스를 이용하라고 했는데 변경 가능한지가 모호하다.
- 해당부분을 변경하지 말라고는 명시는 안되어있어서 우선 사용해볼 예정
## 사용자에게 당첨 번호를 입력받는 기능
- [x] 당첨 번호를 입력받는 기능 구현
- 당첨 번호 입력 요구 메시지를 보여주는 기능
- 문자열을 입력받는 기능
  - 빈 값 입력 제한
  - 길이는 따로 체크하지 않는다.
- InputUtils 책임 확대. 생성 및 변환 기능 구현
  - 당첨 번호 문자열를 입력받아 파싱하고 검증하는 기능 구현 
  - 구분자(쉼표)로 split 후에 숫자로 변환 불가 시 예외 되던는 기능 구현
  - InputConvertUtils 변환로직을 책임지는 클래스 구현
- [x] 보너스 번호를 입력받는 기능 구현
- 보너스 번호 입력 요구 메시지를 보여주는 기능
- 입력 값으로 LottoNumber 생성
- [x] 보너스 번호 중복 체크 기능 구현
## 당첨 통계를 내는 기능
- [x] 당첨 통계를 고지하는 내용을 출력하는 기능 구현
- [x] 로또 번호를 숫자 1개 기준으로 비교하는 기능 구현
- 1개 --> 1개 비교
- 1개 --> 여러개 비교
- [x] 로또 번호를 로또 번호끼리 비교하는 기능 구현
- 여러개 --> 여러개 비교 및 일치하는 개수 카운트
- 여러개 --> 여러개 + 보너스볼 비교 및 일치하는 개수 카운트
- MatchingResult 결과값을 가지는 클래스 생성
- [x] 당첨 통계를 내는 기능 구현
- LottoController 발행된 로또번호들의 출력로직에서 반환값 추가
- Lottos 모든 lotto들에 대해 당첨 번호와 매칭하는 기능 구현
- LottoRank 당첨 순위를 나타내는 enum 구현
- WinnerStatistics 당첨 대조 결과를 전달받아 받아 집계하는 기능 구현
    - 내부 래핑클래스 RankCounts, TotalPrizeAmount
- [x] 당첨 내역을 출력하는 기능 구현
- [x] 수익률을 계산하고 출력하는 기능 구현
- [x] 출력 포맷 수
- [x] 당첨번호 입력 예외처리 추가
- 양끝에 구분자가 들어간 경우 예외처리 추가
## 리팩터링 해야할 부분
- [x] issuedLottos 생성로직과 출력로직 분리
- [x] 메서드 순서 정리 및 개행 제거 
- OutputMessage, OutPutView 등 점검
- [ ] 테스트 정리
- PurchaseBudgetTest 변경을 대비한 과한 테스트 로직 단순화 
- LottoTest 사용하지 않는 변수 삭제
- [ ] InputUtils 개선 및 읽기 방식 통일
- [ ] view 로직들 정리
- [ ] getter 생성에 대한 고민, todo 해결
- [ ] MatchingResult 상수값 포장
- [ ] enum 수정

## 추가 기능
- [ ] MVC 모방해보기
  - Service를 만들어서 도메인 객체를 매핑해서 가져오거나 비즈니스 로직 실행하기
# 전체 체크리스트

## 공통  피드백 + 커밋 전 확인 사항
- [x] README.md 개선
- [x] 함수의 길이를 15라인을 넘어가지 않도록 구현
- [ ] 한 함수가 한 가지 기능하도록 구현
- [x] 코드 자동정렬 활용
- [x] 자바 상수 사용
- [x] 클래스는 상수, 멤버 변수, 생성자, 메서드 순으로 작성
- [x] 메서드 추출 시 static 자동 추가 주의
- ## ✏️ 과제 진행 요구 사항

- [x] 미션은 [java-lotto-6](https://github.com/woowacourse-precourse/java-lotto-6) 저장소를 Fork & Clone해 시작한다.
  - [x] **기능을 구현하기 전 `docs/README.md`에 구현할 기능 목록을 정리**해 추가한다.
- [x] **Git의 커밋 단위는 앞 단계에서 `docs/README.md`에 정리한 기능 목록 단위**로 추가한다.
    - [정밋 메시지 컨벤션](https://gist.github.com/stephenparish/9941e89d80e2bc58a153) 가이드를 참고해 커밋 메시지를 작성한다.
- [x] 과제 진행 및 제출 방법은 [프리코스 과제 제출](https://github.com/woowacourse/woowacourse-docs/tree/master/precourse) 문서를 참고한다.

## 📮 미션 제출 방법

- [x] 미션 구현을 완료한 후 GitHub을 통해 제출해야 한다.
    - [x] GitHub을 활용한 제출 방법은 [프리코스 과제 제출](https://github.com/woowacourse/woowacourse-docs/tree/master/precourse) 문서를 참고해
      제출한다.
- [x] GitHub에 미션을 제출한 후 [우아한테크코스 지원](https://apply.techcourse.co.kr) 사이트에 접속하여 프리코스 과제를 제출한다.
    - [x] 자세한 방법은 [제출 가이드](https://github.com/woowacourse/woowacourse-docs/tree/master/precourse#제출-가이드) 참고
    - [x] **Pull Request만 보내고 지원 플랫폼에서 과제를 제출하지 않으면 최종 제출하지 않은 것으로 처리되니 주의한다.**

## 🚨 과제 제출 전 체크 리스트 - 0점 방지

- [x] **요구 사항에 명시된 출력값 형식을 지키지 않을 경우 0점으로 처리**한다.
- [x] 가이드에 따라 테스트를 실행했을 때 모든 테스트가 성공하는지 확인한다.

### 테스트 실행 가이드

- [x] 터미널에서 `java -version`을 실행하여 Java 버전이 17인지 확인한다.
  Eclipse 또는 IntelliJ IDEA와 같은 IDE에서 Java 17로 실행되는지 확인한다.
- [x] 터미널에서 Mac 또는 Linux 사용자의 경우 `./gradlew clean test` 명령을 실행하고,
  Windows 사용자의 경우 `gradlew.bat clean test` 또는 `./gradlew.bat clean test` 명령을 실행할 때 모든 테스트가 아래와 같이 통과하는지 확인한다.

## 🚀 기능 요구 사항

로또 게임 기능을 구현해야 한다. 로또 게임은 아래와 같은 규칙으로 진행된다.

- [x] 로또 번호의 숫자 범위는 1~45까지이다.
- [x] 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
- [x] 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
- [x] 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
    - 1등: 6개 번호 일치 / 2,000,000,000원
    - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
    - 3등: 5개 번호 일치 / 1,500,000원
    - 4등: 4개 번호 일치 / 50,000원
    - 5등: 3개 번호 일치 / 5,000원

- [x] 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- [x] 로또 1장의 가격은 1,000원이다.
- [x] 당첨 번호와 보너스 번호를 입력받는다.
- [x] 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
- [x] 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
    - [x] `Exception`이 아닌 `IllegalArgumentException`, `IllegalStateException` 등과 같은 명확한 유형을 처리한다.

## 🎯 프로그래밍 요구 사항

- [x] JDK 17 버전에서 실행 가능해야 한다. **JDK 17에서 정상적으로 동작하지 않을 경우 0점 처리한다.**
- [x] 프로그램 실행의 시작점은 `Application`의 `main()`이다.
- [x] `build.gradle` 파일을 변경할 수 없고, 외부 라이브러리를 사용하지 않는다.
- [x] [Java 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/master/styleguide/java) 가이드를 준수하며 프로그래밍한다.
- [x] 프로그램 종료 시 `System.exit()`를 호출하지 않는다.
- [x] 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공해야 한다. **테스트가 실패할 경우 0점 처리한다.**
- [x] 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않는다.
- [x] indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
    - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
    - 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메서드)를 분리하면 된다.
- [x] 3항 연산자를 쓰지 않는다.
- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- [x] JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

### 추가된 요구 사항

- [x] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
    - [x] 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- [x] else 예약어를 쓰지 않는다.
    - 힌트: if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
    - else를 쓰지 말라고 하니 switch/case로 구현하는 경우가 있는데 switch/case도 허용하지 않는다.
- [x] Java Enum을 적용한다.
- [x] 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
    - [ ] 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 분리해 구현한다.
    - [x] 단위 테스트 작성이 익숙하지 않다면 `test/java/lotto/LottoTest`를 참고하여 학습한 후 테스트를 구현한다.

### 라이브러리

- [x] `camp.nextstep.edu.missionutils`에서 제공하는 `Randoms` 및 `Console`
  API를 사용하여 구현해야 한다.
    - [x] Random 값 추출은 `camp.nextstep.edu.missionutils.Randoms`의 `pickUniqueNumbersInRange()`를 활용한다.
    - [x] 사용자가 입력하는 값은 `camp.nextstep.edu.missionutils.Console`의 `readLine()`을 활용한다.

### Lotto 클래스

- [x] 제공된 `Lotto` 클래스를 활용해 구현해야 한다.
- [x] `numbers`의 접근 제어자인 private을 변경할 수 없다.
- [x] `Lotto`에 필드(인스턴스 변수)를 추가할 수 없다.
- [x] `Lotto`의 패키지 변경은 가능하다.

