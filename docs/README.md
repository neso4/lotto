# 🎟 미션 - 로또

## 📌 기능 구현 목록

1. 게임 시작을 위한 Controller인 *LottoController.class* 을 생성한다.
2. 게임을 시작한다.
    1. 구입 금액을 입력한다. (금액은 1,000원 단위로 입력받는다.)
    2. 구입 금액만큼의 로또 수량 및 번호를 출력한다.(5,000원 구매시 로또 5장 출력)
       1. `camp.nextstep.edu.missionutils`에서 제공하는 *Randoms 및 Console API*를 사용하여 1 ~ 45 사이의 무작위 값 6개을 구한다.
       2. 로또 번호는 오름차순으로 정렬되어야 한다.
    3. 사용자는 당첨 번호 숫자 6개를 입력한다. (번호는 쉼표(`,`)를 기준으로 구분한다.)
        1. 당첨 번호는 1이상 45이하로 한다.
        2. 숫자 6개는 서로 중복될 수 없다.
    4. 사용자는 보너스 번호 숫자 1개를 입력한다. (번호는 쉼표(`,`)를 기준으로 구분한다.)
       1. 당첨 번호 6개와 보너스 번호 1개, 총 7개의 숫자는 서로 중복될 수 없다.
    5. 로또 결과를 계산한다.
       1. 당첨 기준은 최소 숫자 3개 이상 일치하면 당첨으로 취급한다.
          - 1등부터 5등까지 나누어진다.
       - 구입 금액 대비 당첨금액을 합산하여 총 수익률을 산출한다. (수익률은 소수점 둘째 자리에서 반올림한다.)
       - 수익률을 3자리씩 `,`구분하여 출력한다. (100,000.5%, 5,000.0%)
       
- Domain에 *Lotto*와 *Referee*를 두어 각 객체가 자신의 책임을 가지고, 그 책임을 수행하는 로직을 객체 안에 구현한다.
  #### Referee
  - Referee는 당첨 번호, 보너스 번호, 로또 랭킹리스트, 수익률 필드 변수를 가지는 로또 결과 계산의 책임을 가지는 도메인이다.
  - 필드 변수에 따른 랭킹 인원 증가 계산, 수익률 계산 등의 로직을 구현한다.
    - 수익률 계산시 합산 값의 Data type은 long으로 구현한다.(정수 오버플로우 발생 방지)
  #### RefereeService
    - RefereeService는 Referee의 비즈니스 로직을 담당할 수 있는 계층으로 책임을 가진다.
        - 로또 등수를 계산하는 로직을 구현한다.
          - 당첨번호가 일치하는 개수는?
          - 보너스 번호가 일치하는가?
        - 로또 당첨결과의 랭킹을 산출하는 로직
          - 당첨번호와 보너스 번호의 일치하는 갯수에 따라 랭킹을 정한다.
  #### Lotto
  - Lotto는 자신의 로또 번호 6자리만을 가진다.
  
  #### LottoService
    - LottoService는 Lotto의 비즈니스 로직을 담당할 수 있는 계층으로 책임을 가진다.
        - 구매금액에 따른 로또 구매수량을 계산해 List\<Lotto>로 만든다.
        - 1 ~ 45 사이의 무작위 값 6개를 중복없이 구한다.
  #### InputView
  - 사용자의 입력 로직을 처리한다.
  #### OutputView
    - Controller의 출력 로직을 처리한다.

  #### EnumType
  - 로또 번호는 Lotto Enum Type으로 분류한다.
  - 랭킹, 수익률 등 결과 산출과 관련된 상수는 Referee Enum Type으로 분류한다.


- *Model*, *View*, *Controller*로 3개로 나누어 *MVC* 패턴으로 기능을 구현한다.
    - *util*, *parsing*, *constant* 등 *MVC*로 분류하기 어렵다면 디렉토리 경로를 분리한다.
## 📌 예외처리 목록

- 예외는 Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.
- 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException를 발생시키고, `[ERROR]`로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
  - 예외발생 시 Application가 종료되어선 안 된다.
- 로또 번호
  - 로또 번호는 `,`로 구분을 하며, 숫자 이외에 다른 값을 입력받을 수 없다. 
  - 1 ~ 45 사이의 숫자여야 한다.
  - 로또 번호는 6개여야 한다.
  - 로또 번호가 중복된 숫자일 경우 예외 처리한다.
- 보너스 번호
  - 보너스 번호는 숫자이외 다른 값을 입력받을 수 없다.
  - 보너스 번호 1개가 로또 당첨 번호 6개 중 하나라도 중복일 경우 예외 처리한다.
- 구입 금액
  - 1,000원 단위로 입력 받으며 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.
  - 0원 또는 음수일 경우 예외 처리한다.
- Referee
  - 1등 ~ 5등 사이의 랭킹이 아닐 경우 IllegalStateException() 예외처리한다.
  - 수익률 계산 시 로또 구매 금액이 0이하일 경우, DivideByZeroException() 처리 전 IllegalArgumentException() 예외처리한다. 

## 📌 테스트 검증

#### 비즈니스 로직
  - 로또 번호 무작위 값을 생성할 때 1 ~ 45 사이의 값이 생성이 되는가?
  - 구매금액만큼 로또 수량이 발급되는가?
  - 로또 당첨 번호와 로또 번호 중 n개 일치할 경우 n개가 카운팅 되는가?
  - 보너스 번호와 로또 번호 중 n개 일치할 경우 보너스 번호 일치가 정상적으로 동작하는가?
  - 수익률이 소숫점 첫째자리 반올림으로 정확하게 계산되는가?
  - 맞춘 갯수 만큼 랭킹 등수가 정확하게 산정되는가?
  - IllegalArgumentException이 발생하는가?
      - 로또 당첨 번호 입력 시 1 이상 45 이하 숫자가 아닌 다른 값을 입력했을 경우
      - 로또 당첨 번호 입력 시 숫자 갯수가 6개가 아닌 경우
      - 로또 당첨 번호 입력 시 숫자가 중복인 경우
      - 보너스 번호 입력 시 로또 당첨 번호 6개 중 중복인 경우
      - 공백 입력 시 예외가 발생
      - 숫자가 아닌 특수문자, 문자 등을 입력했을 경우
  - 로또 당첨 번호 입력 시 `,`로 구분이 되어지는가?
#### 도메인 로직
- Lotto
  - 로또 번호 생성 시 1 이상 45 이하 숫자가 아닌 다른 값을 입력했을 경우
  - 로또 번호 생성 시 숫자 갯수가 6개가 아닌 경우
  - 로또 번호 생성 시 숫자가 중복인 경우
- Referee
  - IllegalStateException이 발생하는가?
      - 랭킹에 맞지 않은 인덱스 값이 포함되는 경우
  - 수익률 계산 시 분모 값(로또 금액)이 0으로 계산될 경우 예외가 발생한다. 



