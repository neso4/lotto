# 우아한테크코스 프리코스 3주차
# 미션 - 로또

---

## 기능 요구 사항
- [ ] 로또 구입 금액을 입력 받는다. 
  - 구입 금액은 1,000원 단위로 입력받으며, 1000원으로 나누어 떨어지지 않는 경우 예외 처리한다.

- [ ] 로또 1장의 가격은 1,000원이며, 입력한 구입 금액만큼의 로또를 발행한다.
  - 로또는 중복되지 않는 1부터 45까지의 6개의 숫자로 구성되어 있다.
  - 발행 후, 콘솔에 발행된 로또를 차례대로 출력한다.

- [ ] 당첨 번호를 입력 받는다. 번호는 쉼표를 기준으로 구분한다.

- [ ] 보너스 번호를 입력 받는다. 

- [ ] 당첨 여부를 확인하고, 각 로또에 대한 당첨 내역를 출력한다.
  
        3개 일치 (5,000원) - 1개
        4개 일치 (50,000원) - 0개
        5개 일치 (1,500,000원) - 0개
        5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
        6개 일치 (2,000,000,000원) - 0개

- [ ] 수익률을 출력한다. 수익률은, 소수점 둘째 자리에서 반올림한다.

- [ ] 입력한 값이 잘못된 경우, [ERROR]로 시작하는 예외 메시지를 출력하며, 해당 부분부터 다시 입력을 받는다.

--- 

## 기능 구현 사항 - domain
- [x] domain에서 쓰이는 상수들을 별도로 정의한 DomainConstant 클래스

- [x] 돈과 관련된 연산을 수행하는 Money 클래스
  - 필드는 long타입으로 지정하였음
  - toString을 재정의하여, 입력된 금액을, 컴마로 구분하고 '원'을 붙여 문자열 형태로 반환함. 

- [x] 한 장의 로또에 대한 정보를 저장하는 Lotto 클래스
  - 입력된 숫자에 대한 예외 검증
    - 예외 메시지는 내부에 정의한 LottoErrorMessage라는 enum에 별도로 저장
  - 보너스볼 파악을 위해, 한 개의 숫자를 포함하고 있는지 여부를 반환하는 기능 정의
  - toString을 재정의하여, 로또 번호가 1,2,3,4,5,6인 경우 [1, 2, 3, 4, 5, 6]과 같이 출력하도록 설정


- [x] 당첨 번호에 대한 정보를 저장하는 WinningLotto 클래스
  - 필드로 Lotto 객체와 int 값인 보너스 번호를 가짐
  - 한 장의 Lotto를 받아서, 비교하는 기능 정의
  

- [x] 로또의 '숫자'를 만드는 LottoNumberGenerator 클래스
  - 주어진 Randoms 라이브러리를 이용하여, 1부터 45까지의 6개의 숫자 리스트를 만들고, 이를 정렬하여 반환
  - 입력이 "1,2,3,4,5,6"과 같은 문자열로 주어진 경우, 이를 숫자 리스트로 변환


- [x] 로또를 만드는 LottoGenerator 클래스
  - 테스트를 위해, LottoNumberGenerator를 주입받을 수 있도록 생성자 설정
  - 입력된 문자열 형태의 당첨 번호와 long 타입의 보너스 번호를 이용하여, WinningLotto 객체를 생성
    - 당첨 번호와 보너스 번호 각각에 대해 예외를 검증
  
  - 입력된 금액을 이용하여, 금액 만큼의 로또 리스트 생성
    - 금액에 대해 예외를 검증
    - 한 개의 로또를 만드는 기능을 분리하고, 이를 여러번 호출하여 금액을 1000으로 나눈 갯수만큼의 로또 생성
  

- [x] 당첨 정보가 저장된 LottoPrizes enum
  - 각 상수는 당첨 조건과, 당첨금 정보를 저장하고 있음
  - 각 상수에 대한 갯수 정보를 저장하는 초기화된 EnumMap을 생성함


- [x] 로또 당첨 결과를 처리하는 LottoResult 클래스
  - 각 당첨 경우에 대한 갯수를 저장하는 Map을 이용하여, 조건의 형식대로 당첨 통계를 출력하고 총 수익금을 얻어내는 기능 정의
    - 한 개의 당첨 결과와 갯수를 이용하여 당첨금을 반환하는 기능을 모든 Map에 반복

- [x] 유저의 모든 로또를 저장하는 UserLottos 클래스
  - 유저의 모든 로또 정보를 조건의 형식대로 출력하는 기능 정의
  - 유저의 모든 로또와 당첨 로또 번호를 비교하고 결과를 LottoResult 객체로 반환함

---

## 기능 구현 사항 - View
- [x] 입력을 받아들이는 InputView 클래스
  - 금액, 당첨 번호, 보너스 번호에 대한 입력을 받고 검증한 뒤 반환


- [x] 출력을 전담하는 OutputView 클래스
  - domain에서 받은 유저의 로또 정보, 당첨 통계, 수익금을 이용하여 조건의 형식대로 출력함


- [x] View에서 쓰이는 상수들이 정의된 ViewConstant 클래스
---
  
## 기능 구현 사항 - Controller
- [x] domain과 view를 이용하여 게임을 관리하는 LottoController 클래스
  - 입력에 대한 예외가 발생할 경우, 예외 메시지를 출력하고 입력을 반복해서 받도록 설정

---

## 예외 처리 사항
- 기본적으로, domain과 view의 분리를 위해 domain에서의 예외 검증은 LottoGenerator, Lotto 클래스에서, view에서의 예외 검증은 InputView에서 진행함


- [x] InputView에서의 검증
  - 로또 번호를 검증하는 메서드는 별도로 분리하고, 당첨 번호와 보너스 번호를 검증할때 이 메서드를 사용함.
  
  - 로또 구입 금액에 대한 검증

        (1) 입력이 비어있는지 확인
        (2) 입력에 숫자 이외의 문자가 들어있는지 확인
        (3) 금액이 1000원 미만인지 확인
        (4) 금액이 1000원 단위인지 확인

  - 당첨 번호에 대한 검증
      
        (1) 입력이 비어있는지 확인
        (2) 입력의 형식이 올바른지 확인 -> 구분자로 쉼표를 사용했는지, 숫자 이외의 문자가 있는지..
        (3) 6개의 숫자로 이루어져 있는지
        (4) (1)~(3)을 모두 통과하면, 각 번호에 대해 별도로 검증

  - 보너스 번호에 대한 검증
  
        (1) 입력이 비어있는지 확인
        (2) 입력이 숫자인지를 확인
        (3) 범위가 1부터 45까지인지를 확인
        (4) 보너스 번호가 당첨 번호와 중복되는지를 확인
  
- [x] LottoGenerator에서의 검증


  - 로또 구입 금액에 대한 검증
    - InputView에서는 문자열로 주어진 금액을 검증했다면, LottoGenerator에선 Money 객체로 주어진 금액을 검증
    

  - 당첨 번호에 대한 검증
    - InputView에서의 검증과 동일하게 진행
  

  - 보너스 번호에 대한 검증
    - InputView에서는 문자열로 주어진 보너스 번호를 검증했다면, LottoMaker에서는 정수로 주어진 보너스 번호를 검증

---

## 테스트 구현 사항
- View에 대한 테스트는 진행하지 않음. 입력값 예외 발생은 Controller에서 한번에 검증함


- [x] 주어진 ApplicationTest : 통과

- [x] Money 클래스에 대한 테스트
  - 1부터 100억까지의 모든 단위의 금액을 컴마로 구분하고 '원'을 붙여서 정확하게 반환하는지 확인함
  
- [x] LottoController 클래스에 대한 테스트
  - 금액, 당첨 번호, 보너스 번호 각각에 대한 모든 예외를 발생시키고, 입력을 반복하여 받는지 확인
  - 모든 입력이 정상일 때, 게임을 정확하게 실행하고 종료하는지 확인


- [x] LottoGenerator 클래스에 대한 테스트
  - 금액, 당첨 번호, 보너스 번호 각각에 대한 모든 예외를 검증함


- [x] LottoNumberGenerator 클래스에 대한 테스트
  - 당첨 번호를 순서대로 입력하지 않았을 때에도 정렬된 번호를 반환하는지를 테스트함


- [x] LottoPrizes 클래스에 대한 테스트
  - 모든 당첨금을 쉼표를 이용하여 구분하고, '원'을 붙여서 출력의 형식대로 정확히 반환하는지 확인함.
    - Money에선 임의의 금액을 지정해서 테스트했다면, LottoPrizesTest에선 당첨금에 대해 한번 더 테스트
  

- [x] LottoResult 클래스에 대한 테스트
  - 5개의 당첨 결과 중 1개만 당첨되는 모든 경우와 5개의 결과 모두 당첨된 경우를 이용하여 당첨금과 통계를 정확히 출력하는지 확인함.


- [x] Lotto 클래스에 대한 테스트
  - 기본적으로 주어진 테스트 : 통과
  - 추가적으로, 1부터 45까지의 숫자인지를 검증하는 테스트를 추가함


- [x] UserLottos 클래스에 대한 테스트
  - 유저의 로또 정보를 정하고, 이를 정확히 요구사항의 출력대로 반환하는지 확인
  - 당첨 번호를 정하고, 당첨 번호와 비교하여 정확한 LottoResult 객체를 반환하는지 확인


- [x] WinningLotto 클래스에 대한 테스트
  - 한 개의 로또의 당첨 여부를 모든 가능한 경우에 대해 확인하고, 정확한 결과를 반환하는지 확인
