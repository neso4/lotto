# 로또

---
우아한 테크코스 6기 백엔드 프리코스 3주차 미션입니다.<br>
로또 게임을 구현합니다.

---

## 🗒️ 기능 목록

- 사용자에게 로또 구입 금액을 입력받습니다.
    - 로또 번호는 1~45 사이입니다.
    - 구입 안내 문구를 출력합니다.
    - 금액을 입력 받습니다.
        - 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생 시키고 "[ERROR]"로 시작하는 에러 메시지 를 출력 후 그 부분 부터 입력을 다시 받는다.
        - `Exception`이 아닌 `IllegalArgumentException`, `IllgalStateException` 등과 같이 명확한 유형을 처리한다.
        - 구입 금액은 1,000원 단위로 입력 받으며, 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.
- 구입 금액에 해당하는 만큼 로또를 발행한다.
    - 구입 금액을 1,000원 단위로 나누어 로또를 발행한다.
    - 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
    - 발행된 로또를 화면에 출력한다.
- 사용자에게 당첨 번호를 입력받습니다.
    - 당첨 번호 입력 안내 문구를 출력합니다.
    - 중복되지 않는 6개의 숫자를 입력받습니다.
    - 보너스 번호 입력 안내 문구를 출력합니다.
    - 입력한 6개의 숫자와 중복되지 않는 보너스 숫자 하나를 입력 받습니다.
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료합니다.
    - 당첨 내역을 출력합니다.
        - 3~6개 까지 일치된 내역을 출력합니다.
            - 3개 = 5,000원
            - 4개 = 50,000원
            - 5개 = 1,500,000원
            - 5개 + 보너스 번호 = 30,000,000원
            - 6개 = 2,000,000,000원
        - 당첨 금액을 수익률로 계산하여 출력합니다.
            - 수익률은 소수점 둘째 자리에서 반올림합니다.

---

## 📦 패키지 구조

<table>
    <tr>
        <th>패키지</th>
        <th>클래스</th>
        <th>설명</th>
    </tr>
    <tr>
        <td>controller</td>
        <td>LottoGameController</td>
        <td>사용자의 입력을 처리하며 모델과 뷰를 연결합니다.</td>
    </tr>
    <tr>
        <td rowspan="4">model</td>
        <td>Lotto</td>
        <td>로또, 발행된 숫자 6자리를 포함하고 있습니다.</td>
    </tr>
    <tr>
        <td>User</td>
        <td>발행된 로또를 List로 가지는 record입니다.</td>
    </tr>
    <tr>
        <td>DrawResult</td>
        <td>당첨 번호 로또 객체와 보너스 번호를 가지고 있는 record입니다.</td>
    </tr>
    <tr>
        <td>LottoGame</td>
        <td>로또 게임의 정보를 관리하고 처리하는 클래스입니다.</td>
    </tr>
    <tr>
        <td rowspan="2">view</td>
        <td>InputView</td>
        <td>사용자 입력을 처리하는 view 클래스입니다.</td>
    </tr>
    <tr>
        <td>OutputView</td>
        <td>사용자의 출력을 처리하는 view 클래스입니다.</td>
    </tr>
    <tr>
        <td rowspan="4">utils</td>
        <td>ErrorMessage</td>
        <td>에러 메시지를 담고있는 Enum입니다.</td>
    </tr>
    <tr>
        <td>GameMessage</td>
        <td>게임에서 사용되는 메시지들을 담고있는 Enum입니다.</td>
    </tr>
    <tr>
        <td>GameNumber</td>
        <td>게임에서 사용되는 숫자들을 담고있는 Enum입니다.</td>
    </tr>
    <tr>
        <td>Match</td>
        <td>로또 매치 상수들을 담고있는 Enum입니다.</td>
    </tr>
    <tr>
        <td colspan="2">Application</td>
        <td>프로그램 시작 지점입니다.</td>
    </tr>
</table>

---

## 💡 고민한 포인트들

### 일급 컬렉션 사용

미션을 진행하면서 일급 컬렉션에 대한 내용을 학습했습니다.

1. 비즈니스 종속적인 자료구조
2. 컬렉션 불변성 보장
3. 상태와 행위를 한 곳에서 관리
4. 이름이 있는 컬렉션<br>
   이와 같은 장점이 있으며 Lotto 클래스를 통해 활용할 예정입니다.

### 검증 기능의 역할과 책임

이번 미션을 시작하기 앞서 검증 로직은 어디서 진행되어야 하는가에 대한 고민이 있었습니다.<br>
제가 내린 결론은 검증을 두 가지 단위로 분리하여 1. 입력 형식에 대한 검증, 2. 도메인 조건 검증 두가지 입니다.<br><br>
첫 번째 입력 형식에 대한 검증은 view 단위에서 진행하도록 했습니다.<br>
view에서는 사용자에게 입력을 받고 controller에게 입력값을 반환하는 책임만 있음으로 도메인에 관한 조건 검증은 진행하지 않고 타입 형식에 대한 검증만을
진행한 후 반환하도록 했습니다.<br><br>
두 번째 도메인 조건 검증은 domain 단위에서 진행하도록 했습니다.<br>
controller가 view에서 입력받은 값을 도메인에게 전달하여 검증 하도록 진행했습니다.<br>
이는 데이터의 유효성은 domain에게 책임지게 만드는 방식이라고 생각하였습니다.

### Enum의 사용

이전까지는 클래스내에 상수로 선언 하였던 메시지와 숫자들을 enum으로 관리하도록 했습니다.<br>
enum의 장점은 타입 안정성, 높은 가독성, 유지보수 용이, 선능 등이 있습니다.<br>
이번 미션에서는 에러 메시지를 관리하는 ExceptionMessage, 게임에서 사용되는 메시지들을 담고 있는 GameMessage,<br>
게임에서 사용되는 숫자들을 담고 있는 GameNumber, 결과 처리와 결과 출력을 위한 Match 네가지 enum을 사용했습니다.<br>
Match같은 경우 로또와 당첨 번호가 일치된 개수와 해당 상금을 같이 지니고 있어 비즈니스 로직 내에서 foreach문을 통해
간단하게 기능 구현이 가능했습니다.<br>

### 다양한 예외 처리를 진행

생각하지 못한 예외가 발생하지 않도록 생각할 수 있는 다양한 예외 처리를 진행했습니다.<br>
또한 이번 요구 사항 중 에러를 발생시킨 후 해당 위치에서 프로그램이 계속 진행되도록 해야하기 때문에 에러를 발생 시킨 후 해당 에러를 적절하게 처리하는<br>
로직을 구현했습니다.

### 변수 이름에 자료형 사용하지 않기